# 자동화 판단 기준 (Skill vs Agent vs Multi-Agent)

## 판단 점수 매트릭스

각 항목 체크 시 점수 부여:

### Skill 점수 (5점 이상 → Skill 권장)
| 항목 | 점수 |
|------|------|
| 같은 명령이 2회 이상 반복됨 | +3 |
| "~해줘" 형태의 명령형 | +2 |
| 순차적 단계 (A→B→C) | +2 |
| 특정 파일/폴더 패턴 | +2 |
| 프로젝트 컨벤션 관련 | +2 |
| 복잡한 판단 불필요 | +1 |

### Agent 점수 (5점 이상 → Agent 권장)
| 항목 | 점수 |
|------|------|
| 복잡한 분석/판단 필요 | +3 |
| 도구 사용 제한 필요 | +3 |
| 컨텍스트 격리 필요 | +3 |
| 전문 지식 영역 | +2 |
| 반복적이지만 매번 다른 판단 | +2 |
| 에러 처리/복구 로직 필요 | +2 |

### Multi-Agent 점수 (5점 이상 → Multi-Agent 권장)
| 항목 | 점수 |
|------|------|
| 서로 다른 전문 영역 필요 | +4 |
| 병렬 처리 가능 | +3 |
| 역할 분리 명확 | +3 |
| 파이프라인 구조 (A→B→C 각각 전문가) | +3 |
| 결과 통합 필요 | +2 |

## 상세 판단 기준

### Skill이 적합한 경우

1. **반복 명령**
   - "커밋해줘", "푸시해줘"
   - "테스트 돌려줘"
   - "빌드해줘"

2. **순차 워크플로우**
   - "린트 → 테스트 → 빌드"
   - "브랜치 생성 → 작업 → PR"

3. **프로젝트 컨벤션**
   - 특정 형식의 파일 생성
   - 네이밍 규칙 적용
   - 보일러플레이트 생성

### Agent가 적합한 경우

1. **복잡한 판단**
   - 코드 리뷰 (품질 평가)
   - 버그 분석 (원인 추론)
   - 리팩토링 제안 (설계 판단)

2. **도구 제한**
   - 읽기 전용 분석
   - 특정 폴더만 접근
   - 실행 권한 없음

3. **컨텍스트 격리**
   - 독립적인 분석 환경
   - 다른 작업에 영향 없음

### Multi-Agent가 적합한 경우

1. **전문 영역 협업**
   - 프론트엔드 + 백엔드 리뷰
   - 보안 + 성능 분석
   - 코드 + 문서 + 테스트

2. **파이프라인**
   - 분석 → 계획 → 실행 → 검증
   - 코드 생성 → 리뷰 → 수정

3. **병렬 처리**
   - 여러 파일 동시 분석
   - 여러 관점 동시 검토

## 예시 케이스

### 케이스 1: "커밋해줘"
- 반복 명령 → Skill 점수 +5
- **결과: Skill**

### 케이스 2: "이 코드 리뷰해줘"
- 복잡한 판단 → Agent 점수 +3
- 전문 지식 → Agent 점수 +2
- **결과: Agent**

### 케이스 3: "코드 분석하고 리팩토링하고 테스트 작성해줘"
- 서로 다른 전문 영역 → Multi-Agent 점수 +4
- 파이프라인 구조 → Multi-Agent 점수 +3
- **결과: Multi-Agent**

### 케이스 4: "오늘 날씨 어때?"
- 일회성 질문
- **결과: 생성 안함**

## 세션 분석 보너스 점수

세션 파일(~/.claude/projects/)에서 추출한 데이터 기반 보너스 점수.
기본 점수에 합산하여 최종 점수를 계산합니다.

### Skill 보너스
| 조건 | 보너스 |
|------|--------|
| 동일 Bash 패턴이 3+ 세션에서 반복 | +3 |
| 동일 도구 시퀀스(A→B→C)가 반복 | +2 |

### Agent 보너스
| 조건 | 보너스 |
|------|--------|
| 읽기 전용 도구만 사용 (Read, Grep, Glob) | +3 |
| 에러/재시도 패턴 감지 (`is_error:true` 후 동일 도구 재호출) | +2 |

### Multi-Agent 보너스
| 조건 | 보너스 |
|------|--------|
| 한 작업에서 서로 다른 도메인 도구 사용 (예: Bash+Read+WebFetch) | +3 |
| 순차적 전문화 단계 감지 (분석→생성→검증 패턴) | +2 |

### 세션 보너스 적용 조건

- `.claude/.session-path-cache`가 존재해야 적용 가능
- 세션 파일이 없으면 보너스 0 (기존 프롬프트 기반 점수만 사용)
- 보너스는 기본 점수에 합산 (예: Skill 기본 5점 + 세션 보너스 3점 = 8점)

## 애매한 경우

점수가 비슷하면:
1. 사용자에게 선택지 제공
2. 더 간단한 유형부터 시작 권장 (Skill → Agent → Multi-Agent)
3. "상세" 옵션으로 차이점 설명
